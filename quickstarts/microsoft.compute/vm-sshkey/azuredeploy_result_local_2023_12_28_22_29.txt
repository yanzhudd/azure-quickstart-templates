arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"projectName": {"type": "string", "metadata": {"description": "Specifies a name for generating resource names."}, "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Specifies the location for all resources."}}, "adminUsername": {"type": "string", "metadata": {"description": "Specifies a username for the Virtual Machine."}, "defaultValue": "zytest"}, "adminPublicKey": {"type": "string", "metadata": {"description": "Specifies the SSH rsa public key file as a string. Use \\"ssh-keygen -t rsa -b 2048\\" to generate your SSH key pairs."}, "defaultValue": "zytest"}, "vmSize": {"type": "string", "defaultValue": "Standard_D2s_v3", "metadata": {"description": "description"}}}, "variables": {"vNetName": "[concat(parameters(\'projectName\'), \'-vnet\')]", "vNetAddressPrefixes": "10.0.0.0/16", "vNetSubnetName": "default", "vNetSubnetAddressPrefix": "10.0.0.0/24", "vmName": "[concat(parameters(\'projectName\'), \'-vm\')]", "publicIPAddressName": "[concat(parameters(\'projectName\'), \'-ip\')]", "networkInterfaceName": "[concat(parameters(\'projectName\'), \'-nic\')]", "networkSecurityGroupName": "[concat(parameters(\'projectName\'), \'-nsg\')]", "networkSecurityGroupName2": "[concat(variables(\'vNetSubnetName\'), \'-nsg\')]"}, "resources": [{"type": "Microsoft.Network/networkSecurityGroups", "apiVersion": "2020-05-01", "name": "[variables(\'networkSecurityGroupName\')]", "location": "[parameters(\'location\')]", "properties": {"securityRules": [{"name": "ssh_rule", "properties": {"description": "Locks inbound down to ssh default port 22.", "protocol": "Tcp", "sourcePortRange": "*", "destinationPortRange": "22", "sourceAddressPrefix": "*", "destinationAddressPrefix": "*", "access": "Allow", "priority": 123, "direction": "Inbound"}}]}}, {"type": "Microsoft.Network/publicIPAddresses", "apiVersion": "2020-05-01", "name": "[variables(\'publicIPAddressName\')]", "location": "[parameters(\'location\')]", "properties": {"publicIPAllocationMethod": "Dynamic"}, "sku": {"name": "Basic"}}, {"comments": "Simple Network Security Group for subnet [variables(\'vNetSubnetName\')]", "type": "Microsoft.Network/networkSecurityGroups", "apiVersion": "2020-05-01", "name": "[variables(\'networkSecurityGroupName2\')]", "location": "[parameters(\'location\')]", "properties": {"securityRules": [{"name": "default-allow-22", "properties": {"priority": 1000, "access": "Allow", "direction": "Inbound", "destinationPortRange": "22", "protocol": "Tcp", "sourceAddressPrefix": "*", "sourcePortRange": "*", "destinationAddressPrefix": "*"}}]}}, {"type": "Microsoft.Network/virtualNetworks", "apiVersion": "2020-05-01", "name": "[variables(\'vNetName\')]", "location": "[parameters(\'location\')]", "dependsOn": ["[resourceId(\'Microsoft.Network/networkSecurityGroups\', variables(\'networkSecurityGroupName2\'))]"], "properties": {"addressSpace": {"addressPrefixes": ["[variables(\'vNetAddressPrefixes\')]"]}, "subnets": [{"name": "[variables(\'vNetSubnetName\')]", "properties": {"addressPrefix": "[variables(\'vNetSubnetAddressPrefix\')]", "networkSecurityGroup": {"id": "[resourceId(\'Microsoft.Network/networkSecurityGroups\', variables(\'networkSecurityGroupName2\'))]"}}}]}}, {"type": "Microsoft.Network/networkInterfaces", "apiVersion": "2020-05-01", "name": "[variables(\'networkInterfaceName\')]", "location": "[parameters(\'location\')]", "dependsOn": ["[resourceId(\'Microsoft.Network/publicIPAddresses\', variables(\'publicIPAddressName\'))]", "[resourceId(\'Microsoft.Network/virtualNetworks\', variables(\'vNetName\'))]", "[resourceId(\'Microsoft.Network/networkSecurityGroups\', variables(\'networkSecurityGroupName\'))]"], "properties": {"ipConfigurations": [{"name": "ipconfig1", "properties": {"privateIPAllocationMethod": "Dynamic", "publicIPAddress": {"id": "[resourceId(\'Microsoft.Network/publicIPAddresses\', variables(\'publicIPAddressName\'))]"}, "subnet": {"id": "[resourceId(\'Microsoft.Network/virtualNetworks/subnets\', variables(\'vNetName\'), variables(\'vNetSubnetName\'))]"}}}]}}, {"type": "Microsoft.Compute/virtualMachines", "apiVersion": "2021-11-01", "name": "[variables(\'vmName\')]", "location": "[parameters(\'location\')]", "dependsOn": ["[resourceId(\'Microsoft.Network/networkInterfaces\', variables(\'networkInterfaceName\'))]"], "properties": {"hardwareProfile": {"vmSize": "[parameters(\'vmSize\')]"}, "osProfile": {"computerName": "[variables(\'vmName\')]", "adminUsername": "[parameters(\'adminUsername\')]", "linuxConfiguration": {"disablePasswordAuthentication": true, "ssh": {"publicKeys": [{"path": "[concat(\'/home/\', parameters(\'adminUsername\'), \'/.ssh/authorized_keys\')]", "keyData": "[parameters(\'adminPublicKey\')]"}]}}}, "storageProfile": {"imageReference": {"publisher": "Canonical", "offer": "UbuntuServer", "sku": "18_04-lts-gen2", "version": "latest"}, "osDisk": {"createOption": "fromImage"}}, "networkProfile": {"networkInterfaces": [{"id": "[resourceId(\'Microsoft.Network/networkInterfaces\', variables(\'networkInterfaceName\'))]"}]}}}]}


cli_script
Below is the translated bash script from the provided ARM template and parameters:\n\n```bash\n#!/bin/bash\n\n# Parameters\nprojectName="zytest"\nlocation="westus"\nadminUsername="zytest"\nadminPublicKey="zytest"\nvmSize="Standard_D2s_v3"\n\n# Variables (constructed from parameters)\nvNetName="${projectName}-vnet"\nvNetAddressPrefixes="10.0.0.0/16"\nvNetSubnetName="default"\nvNetSubnetAddressPrefix="10.0.0.0/24"\nvmName="${projectName}-vm"\npublicIPAddressName="${projectName}-ip"\nnetworkInterfaceName="${projectName}-nic"\nnetworkSecurityGroupName="${projectName}-nsg"\nnetworkSecurityGroupName2="${vNetSubnetName}-nsg"\n\n# Create Network Security Group with SSH rule\naz network nsg create \\\n    --name $networkSecurityGroupName \\\n    --resource-group $resourceGroup \\\n    --location $location \\\n    --tags projectName=$projectName\naz network nsg rule create \\\n    --nsg-name $networkSecurityGroupName \\\n    --resource-group $resourceGroup \\\n    --name ssh_rule \\\n    --priority 123 \\\n    --access Allow \\\n    --direction Inbound \\\n    --protocol Tcp \\\n    --destination-port-range 22 \\\n    --source-address-prefix "*" \\\n    --destination-address-prefix "*"\n\n# Create Public IP Address\naz network public-ip create \\\n    --name $publicIPAddressName \\\n    --resource-group $resourceGroup \\\n    --location $location \\\n    --allocation-method Dynamic \\\n    --sku Basic\n\n# Create Network Security Group for Subnet\naz network nsg create \\\n    --name $networkSecurityGroupName2 \\\n    --resource-group $resourceGroup \\\n    --location $location \\\n    --tags projectName=$projectName\naz network nsg rule create \\\n    --nsg-name $networkSecurityGroupName2 \\\n    --resource-group $resourceGroup \\\n    --name default-allow-22 \\\n    --priority 1000 \\\n    --access Allow \\\n    --direction Inbound \\\n    --protocol Tcp \\\n    --destination-port-range 22 \\\n    --source-address-prefix "*" \\\n    --destination-address-prefix "*"\n\n# Create Virtual Network and Subnet\naz network vnet create \\\n    --name $vNetName \\\n    --resource-group $resourceGroup \\\n    --location $location \\\n    --address-prefixes $vNetAddressPrefixes \\\n    --subnet-name $vNetSubnetName \\\n    --subnet-address-prefix $vNetSubnetAddressPrefix \\\n    --network-security-group $networkSecurityGroupName2\n\n# Create Network Interface\naz network nic create \\\n    --name $networkInterfaceName \\\n    --resource-group $resourceGroup \\\n    --location $location \\\n    --vnet-name $vNetName \\\n    --subnet $vNetSubnetName \\\n    --network-security-group $networkSecurityGroupName \\\n    --public-ip-address $publicIPAddressName\n\n# Create Virtual Machine\naz vm create \\\n    --name $vmName \\\n    --resource-group $resourceGroup \\\n    --location $location \\\n    --size $vmSize \\\n    --admin-username $adminUsername \\\n    --ssh-key-value "$adminPublicKey" \\\n    --image UbuntuLTS \\\n    --nics $networkInterfaceName\n```\n\nPlease replace `$resourceGroup` with your actual Azure resource group name where the resources will be deployed. The script assumes that the `az` CLI is already logged in to the Azure account and that the necessary permissions are in place.


verify_result
