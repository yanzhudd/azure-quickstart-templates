arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"vhdUri": {"type": "string", "metadata": {"description": "Storage VHD Uri"}, "defaultValue": "zytest"}, "managedDiskName": {"type": "string", "metadata": {"description": "Name of the managed disk to be copied"}, "defaultValue": "zytest"}, "keyVaultResourceID": {"type": "string", "metadata": {"description": "KeyVault resource id. Ex: /subscriptions/subscriptionid/resourceGroups/contosorg/providers/Microsoft.KeyVault/vaults/contosovault"}, "defaultValue": "zytest"}, "keyVaultSecretUrl": {"type": "string", "metadata": {"description": "KeyVault secret Url. Ex: https://contosovault.vault.azure.net/secrets/contososecret/e088818e865e48488cf363af16dea596"}, "defaultValue": "zytest"}, "useExistingKek": {"type": "string", "defaultValue": "nokek", "allowedValues": ["nokek", "kek"], "metadata": {"description": "Select kek if the secret is encrypted with a key encryption key and pass explicit keyVaultKekUrl. For nokek, you can keep keyVaultKekUrl empty."}}, "kekUrl": {"type": "string", "defaultValue": "", "metadata": {"description": "key encryption key Url. Ex: https://contosovault.vault.azure.net/keys/contosokek/562a4bb76b524a1493a6afe8e536ee78"}}, "kekVaultResourceID": {"type": "string", "defaultValue": "", "metadata": {"description": "key encryption key vault resource id. Ex: /subscriptions/subscriptionid/resourceGroups/contosorg/providers/Microsoft.KeyVault/vaults/contosovault"}}}, "variables": {"createDiskUrl": "[concat(\'https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-create-encrypted-managed-disk/CreateEncryptedManagedDisk-\',parameters(\'useExistingKek\'),\'.json\')]"}, "resources": [{"name": "CreateEncryptedManagedDisk", "type": "Microsoft.Resources/deployments", "apiVersion": "2015-01-01", "properties": {"mode": "Incremental", "templateLink": {"uri": "[variables(\'createDiskUrl\')]", "contentVersion": "1.0.0.0"}, "parameters": {"vhdUri": {"value": "[parameters(\'vhdUri\')]"}, "managedDiskName": {"value": "[parameters(\'managedDiskName\')]"}, "keyVaultResourceID": {"value": "[parameters(\'keyVaultResourceID\')]"}, "keyVaultSecretUrl": {"value": "[parameters(\'keyVaultSecretUrl\')]"}, "kekUrl": {"value": "[parameters(\'kekUrl\')]"}, "kekVaultResourceID": {"value": "[parameters(\'kekVaultResourceID\')]"}}}}]}


cli_script
Based on the provided JSON data, the ARM template includes a single resource of type `Microsoft.Resources/deployments` which is used to create an encrypted managed disk. The parameters provided will be used to set up the resource\'s properties.\n\nHere is the equivalent bash script using Azure CLI commands to create the same resources as specified in the ARM template. Please note that since the ARM template is referring to another template via a URL, we cannot directly translate this to a single Azure CLI command. Instead, we\'ll simulate the deployment using `az deployment group create` with the template URI.\n\n```bash\n#!/bin/bash\n\n# Template parameters\nvhdUri="zytest" # Storage VHD Uri\nmanagedDiskName="zytest" # Name of the managed disk to be copied\nkeyVaultResourceID="zytest" # KeyVault resource id\nkeyVaultSecretUrl="zytest" # KeyVault secret Url\nuseExistingKek="nokek" # Select kek if the secret is encrypted with a key encryption key\nkekUrl="" # key encryption key Url\nkekVaultResourceID="" # key encryption key vault resource id\n\n# Variables\ncreateDiskUrl="https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-create-encrypted-managed-disk/CreateEncryptedManagedDisk-${useExistingKek}.json"\n\n# Deploy the encrypted managed disk using an ARM template\naz deployment group create \\\n  --name CreateEncryptedManagedDisk \\\n  --resource-group <ResourceGroupName> \\ # Replace <ResourceGroupName> with your actual resource group name\n  --template-uri "$createDiskUrl" \\\n  --parameters vhdUri="$vhdUri" \\\n               managedDiskName="$managedDiskName" \\\n               keyVaultResourceID="$keyVaultResourceID" \\\n               keyVaultSecretUrl="$keyVaultSecretUrl" \\\n               kekUrl="$kekUrl" \\\n               kekVaultResourceID="$kekVaultResourceID"\n```\n\nPlease replace `<ResourceGroupName>` with the actual name of the resource group where you want to deploy the resources. Also, ensure that you have the necessary permissions to create resources in the specified resource group and that the Azure CLI is installed and logged in to the correct Azure subscription.


verify_result
