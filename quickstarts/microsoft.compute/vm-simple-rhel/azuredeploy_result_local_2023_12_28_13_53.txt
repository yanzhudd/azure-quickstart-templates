arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"adminUsername": {"type": "string", "metadata": {"description": "User name for the Virtual Machine."}, "defaultValue": "zytest"}, "vmName": {"type": "string", "metadata": {"description": "Name for the Virtual Machine."}, "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Location for all resources."}}, "authenticationType": {"type": "string", "defaultValue": "sshPublicKey", "allowedValues": ["sshPublicKey", "password"], "metadata": {"description": "Type of authentication to use on the Virtual Machine. SSH key is recommended."}}, "adminPasswordOrKey": {"type": "securestring", "metadata": {"description": "SSH Key or password for the Virtual Machine. SSH key is recommended."}, "defaultValue": "zytest"}, "vmSize": {"type": "string", "defaultValue": "Standard_A1_v2", "metadata": {"description": "Size of the virtual machine"}}}, "variables": {"dataDisk1Name": "[concat(uniquestring(parameters(\'vmName\')), \'datadisk1\')]", "dataDisk2Name": "[concat(uniquestring(parameters(\'vmName\')), \'datadisk2\')]", "imagePublisher": "RedHat", "imageOffer": "RHEL", "imageSku": "7.8", "nicName": "[concat(uniquestring(parameters(\'vmName\')), \'nic\')]", "addressPrefix": "10.0.0.0/16", "subnetName": "Subnet", "subnetPrefix": "10.0.0.0/24", "publicIPAddressName": "[concat(uniquestring(parameters(\'vmName\')), \'publicip\')]", "publicIPAddressType": "Dynamic", "virtualNetworkName": "[concat(uniquestring(parameters(\'vmName\')), \'vnet\')]", "subnetRef": "[resourceId(\'Microsoft.Network/virtualNetworks/subnets\', variables(\'virtualNetworkName\'), variables(\'subnetName\'))]", "linuxConfiguration": {"disablePasswordAuthentication": true, "ssh": {"publicKeys": [{"path": "[concat(\'/home/\', parameters(\'adminUsername\'), \'/.ssh/authorized_keys\')]", "keyData": "[parameters(\'adminPasswordOrKey\')]"}]}}, "networkSecurityGroupName": "default-NSG"}, "resources": [{"apiVersion": "2020-05-01", "type": "Microsoft.Network/publicIPAddresses", "name": "[variables(\'publicIPAddressName\')]", "location": "[parameters(\'location\')]", "properties": {"publicIPAllocationMethod": "[variables(\'publicIPAddressType\')]"}}, {"comments": "Default Network Security Group for template", "type": "Microsoft.Network/networkSecurityGroups", "apiVersion": "2020-05-01", "name": "[variables(\'networkSecurityGroupName\')]", "location": "[parameters(\'location\')]", "properties": {"securityRules": [{"name": "default-allow-22", "properties": {"priority": 1000, "access": "Allow", "direction": "Inbound", "destinationPortRange": "22", "protocol": "Tcp", "sourceAddressPrefix": "*", "sourcePortRange": "*", "destinationAddressPrefix": "*"}}]}}, {"apiVersion": "2020-05-01", "type": "Microsoft.Network/virtualNetworks", "name": "[variables(\'virtualNetworkName\')]", "location": "[parameters(\'location\')]", "dependsOn": ["[resourceId(\'Microsoft.Network/networkSecurityGroups\', variables(\'networkSecurityGroupName\'))]"], "properties": {"addressSpace": {"addressPrefixes": ["[variables(\'addressPrefix\')]"]}, "subnets": [{"name": "[variables(\'subnetName\')]", "properties": {"addressPrefix": "[variables(\'subnetPrefix\')]", "networkSecurityGroup": {"id": "[resourceId(\'Microsoft.Network/networkSecurityGroups\', variables(\'networkSecurityGroupName\'))]"}}}]}}, {"apiVersion": "2020-05-01", "type": "Microsoft.Network/networkInterfaces", "name": "[variables(\'nicName\')]", "location": "[parameters(\'location\')]", "dependsOn": ["[resourceId(\'Microsoft.Network/publicIPAddresses/\', variables(\'publicIPAddressName\'))]", "[resourceId(\'Microsoft.Network/virtualNetworks/\', variables(\'virtualNetworkName\'))]"], "properties": {"ipConfigurations": [{"name": "ipconfig1", "properties": {"privateIPAllocationMethod": "Dynamic", "publicIPAddress": {"id": "[resourceId(\'Microsoft.Network/publicIPAddresses\',variables(\'publicIPAddressName\'))]"}, "subnet": {"id": "[variables(\'subnetRef\')]"}}}]}}, {"apiVersion": "2020-06-01", "type": "Microsoft.Compute/virtualMachines", "name": "[parameters(\'vmName\')]", "location": "[parameters(\'location\')]", "tags": {"Tag1": "ManagedVM"}, "dependsOn": ["[resourceId(\'Microsoft.Network/networkInterfaces/\', variables(\'nicName\'))]"], "properties": {"hardwareProfile": {"vmSize": "[parameters(\'vmSize\')]"}, "osProfile": {"computerName": "[parameters(\'vmName\')]", "adminUsername": "[parameters(\'adminUsername\')]", "adminPassword": "[parameters(\'adminPasswordOrKey\')]", "linuxConfiguration": "[if(equals(parameters(\'authenticationType\'), \'password\'), json(\'null\'), variables(\'linuxConfiguration\'))]"}, "storageProfile": {"imageReference": {"publisher": "[variables(\'imagePublisher\')]", "offer": "[variables(\'imageOffer\')]", "sku": "[variables(\'imageSku\')]", "version": "latest"}, "dataDisks": [{"name": "[variables(\'dataDisk1Name\')]", "diskSizeGB": 100, "lun": 0, "createOption": "Empty"}, {"name": "[variables(\'dataDisk2Name\')]", "diskSizeGB": 100, "lun": 1, "createOption": "Empty"}]}, "networkProfile": {"networkInterfaces": [{"id": "[resourceId(\'Microsoft.Network/networkInterfaces\', variables(\'nicName\'))]"}]}}}]}


cli_script
Below is the translated Azure CLI script from the provided ARM template and parameters. Please note that some ARM template functions, like `uniquestring`, do not have direct equivalents in Azure CLI and need to be handled differently. For simplicity, I\'m assuming that the VM name is unique and using it directly for resource naming.\n\n```bash\n#!/bin/bash\n\n# Template Parameters\nadminUsername="zytest" # User name for the Virtual Machine.\nvmName="zytest" # Name for the Virtual Machine.\nlocation="westus" # Location for all resources.\nauthenticationType="sshPublicKey" # Type of authentication to use on the Virtual Machine. SSH key is recommended.\nadminPasswordOrKey="zytest" # SSH Key or password for the Virtual Machine. SSH key is recommended.\nvmSize="Standard_A1_v2" # Size of the virtual machine\n\n# Variables (some variables are derived from parameters and need unique handling in CLI)\ndataDisk1Name="${vmName}datadisk1"\ndataDisk2Name="${vmName}datadisk2"\nimagePublisher="RedHat"\nimageOffer="RHEL"\nimageSku="7.8"\nnicName="${vmName}nic"\naddressPrefix="10.0.0.0/16"\nsubnetName="Subnet"\nsubnetPrefix="10.0.0.0/24"\npublicIPAddressName="${vmName}publicip"\npublicIPAddressType="Dynamic"\nvirtualNetworkName="${vmName}vnet"\n# Note: subnetRef and linuxConfiguration are not directly translatable to CLI variables\n\n# Create a public IP address\naz network public-ip create \\\n    --name $publicIPAddressName \\\n    --resource-group <ResourceGroup> \\\n    --location $location \\\n    --allocation-method $publicIPAddressType\n\n# Create a Network Security Group and a security rule\naz network nsg create \\\n    --name default-NSG \\\n    --resource-group <ResourceGroup> \\\n    --location $location\n\naz network nsg rule create \\\n    --nsg-name default-NSG \\\n    --resource-group <ResourceGroup> \\\n    --name default-allow-22 \\\n    --priority 1000 \\\n    --access Allow \\\n    --direction Inbound \\\n    --destination-port-ranges 22 \\\n    --protocol Tcp \\\n    --source-address-prefix \'*\' \\\n    --source-port-range \'*\'\n\n# Create a virtual network and subnet\naz network vnet create \\\n    --name $virtualNetworkName \\\n    --resource-group <ResourceGroup> \\\n    --location $location \\\n    --address-prefix $addressPrefix \\\n    --subnet-name $subnetName \\\n    --subnet-prefix $subnetPrefix \\\n    --network-security-group default-NSG\n\n# Create a network interface\naz network nic create \\\n    --name $nicName \\\n    --resource-group <ResourceGroup> \\\n    --location $location \\\n    --vnet-name $virtualNetworkName \\\n    --subnet $subnetName \\\n    --public-ip-address $publicIPAddressName\n\n# Create a virtual machine\naz vm create \\\n    --name $vmName \\\n    --resource-group <ResourceGroup> \\\n    --location $location \\\n    --nics $nicName \\\n    --size $vmSize \\\n    --image $imagePublisher:$imageOffer:$imageSku:latest \\\n    --admin-username $adminUsername \\\n    --authentication-type $authenticationType \\\n    --ssh-key-value "$adminPasswordOrKey" \\\n    --tags Tag1=ManagedVM\n\n# Add data disks to the virtual machine\naz vm disk attach \\\n    --vm-name $vmName \\\n    --resource-group <ResourceGroup> \\\n    --name $dataDisk1Name \\\n    --size-gb 100 \\\n    --lun 0 \\\n    --new\n\naz vm disk attach \\\n    --vm-name $vmName \\\n    --resource-group <ResourceGroup> \\\n    --name $dataDisk2Name \\\n    --size-gb 100 \\\n    --lun 1 \\\n    --new\n```\n\nMake sure to replace `<ResourceGroup>` with the name of your resource group where you want to deploy these resources. Also, ensure that the SSH key value or password provided is secure and follow best practices for authentication.


verify_result
