arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"sqlVMName": {"type": "string", "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus"}, "adminUsername": {"type": "string", "defaultValue": "zytest"}, "adminPassword": {"type": "securestring", "defaultValue": "zytest"}, "sqlUsername": {"type": "string", "defaultValue": "zytest"}, "sqlPassword": {"type": "securestring", "defaultValue": "zytest"}, "disksCount": {"type": "int", "defaultValue": "zytest"}, "diskSizeInGB": {"type": "int", "defaultValue": "zytest"}, "sqlEnginePort": {"type": "int", "defaultValue": "zytest"}, "workloadType": {"type": "string", "defaultValue": "zytest"}, "connectionType": {"type": "string", "defaultValue": "zytest"}, "sqlVMPrepareModulesURL": {"type": "string", "defaultValue": "zytest"}, "sqlVMPrepareConfigurationFunction": {"type": "string", "defaultValue": "zytest"}}, "resources": [{"type": "Microsoft.Compute/virtualMachines/extensions", "name": "[concat(parameters(\'sqlVMName\'),\'/dscExtension\')]", "apiVersion": "2020-12-01", "location": "[parameters(\'location\')]", "properties": {"publisher": "Microsoft.Powershell", "type": "DSC", "typeHandlerVersion": "2.19", "autoUpgradeMinorVersion": false, "settings": {"ModulesUrl": "[parameters(\'sqlVMPrepareModulesURL\')]", "ConfigurationFunction": "[parameters(\'sqlVMPrepareConfigurationFunction\')]", "properties": {"SQLAdminAuthCreds": {"userName": "[parameters(\'adminUsername\')]", "Password": "privateSettingsRef:AdminPassword"}, "SQLAuthCreds": {"userName": "[parameters(\'sqlUsername\')]", "Password": "privateSettingsRef:SqlAuthPassword"}, "DisksCount": "[parameters(\'disksCount\')]", "DiskSizeInGB": "[parameters(\'diskSizeInGB\')]", "DatabaseEnginePort": "[parameters(\'sqlEnginePort\')]", "WorkloadType": "[parameters(\'workloadType\')]", "ConnectionType": "[parameters(\'connectionType\')]"}}, "protectedSettings": {"items": {"AdminPassword": "[parameters(\'adminPassword\')]", "SqlAuthPassword": "[parameters(\'sqlPassword\')]"}}}}]}


cli_script
Based on the provided ARM template and parameters, here\'s the equivalent Azure CLI bash script:\n\n```bash\n#!/bin/bash\n\n# Define the parameters as variables\nsqlVMName="zytest"\nlocation="westus"\nadminUsername="zytest"\nadminPassword="zytest" # This is a secure string, ensure it\'s handled securely\nsqlUsername="zytest"\nsqlPassword="zytest" # This is a secure string, ensure it\'s handled securely\ndisksCount="zytest" # Assuming this should be an integer, but a string \'zytest\' is provided\ndiskSizeInGB="zytest" # Assuming this should be an integer, but a string \'zytest\' is provided\nsqlEnginePort="zytest" # Assuming this should be an integer, but a string \'zytest\' is provided\nworkloadType="zytest"\nconnectionType="zytest"\nsqlVMPrepareModulesURL="zytest"\nsqlVMPrepareConfigurationFunction="zytest"\n\n# Deploy the DSC extension to the virtual machine\naz vm extension set \\\n  --resource-group <resource-group-name> \\ # Replace with your resource group name\n  --vm-name $sqlVMName \\\n  --name dscExtension \\\n  --publisher Microsoft.Powershell \\\n  --version 2.19 \\\n  --settings "{\\"ModulesUrl\\":\\"$sqlVMPrepareModulesURL\\",\\"ConfigurationFunction\\":\\"$sqlVMPrepareConfigurationFunction\\",\\"properties\\":{\\"SQLAdminAuthCreds\\":{\\"userName\\":\\"$adminUsername\\",\\"Password\\":\\"privateSettingsRef:AdminPassword\\"},\\"SQLAuthCreds\\":{\\"userName\\":\\"$sqlUsername\\",\\"Password\\":\\"privateSettingsRef:SqlAuthPassword\\"},\\"DisksCount\\":\\"$disksCount\\",\\"DiskSizeInGB\\":\\"$diskSizeInGB\\",\\"DatabaseEnginePort\\":\\"$sqlEnginePort\\",\\"WorkloadType\\":\\"$workloadType\\",\\"ConnectionType\\":\\"$connectionType\\"}}" \\\n  --protected-settings "{\\"items\\":{\\"AdminPassword\\":\\"$adminPassword\\",\\"SqlAuthPassword\\":\\"$sqlPassword\\"}}" \\\n  --location $location\n```\n\nPlease note:\n- The `<resource-group-name>` should be replaced with the actual name of the resource group where the virtual machine is located.\n- The `disksCount`, `diskSizeInGB`, and `sqlEnginePort` are assumed to be integers, but the default value \'zytest\' provided in the JSON is a string. You should replace \'zytest\' with actual integer values as needed.\n- The `adminPassword` and `sqlPassword` are marked as secure strings. Ensure that these values are handled securely in your environment. They should not be stored in plaintext in scripts or exposed in logs.\n- The `location` is set to `westus` as per the provided default value. If you need to deploy to a different location, adjust the `location` variable accordingly.\n- This script assumes that the virtual machine identified by `$sqlVMName` already exists. If not, you will need to create the VM before running this script.


verify_result
