arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"vmName": {"type": "string", "metadata": {"description": "Name of the virtual machine"}, "defaultValue": "zytest"}, "adminUsername": {"type": "string", "metadata": {"description": "Admin user name for the virtual machine"}, "defaultValue": "zytest"}, "adminPassword": {"type": "securestring", "metadata": {"description": "Admin user password for virtual machine"}, "defaultValue": "zytest"}, "vmSize": {"type": "string", "defaultValue": "Standard_D2s_v3", "metadata": {"description": "Size of VM"}}, "imagePublisher": {"type": "string", "defaultValue": "MicrosoftWindowsServer"}, "imageOffer": {"type": "string", "defaultValue": "WindowsServer"}, "osSku": {"type": "string", "defaultValue": "2012-R2-Datacenter", "metadata": {"description": "OS sku for VM"}}, "nicId": {"type": "string", "metadata": {"description": "Network interface id."}, "defaultValue": "zytest"}, "location": {"type": "string", "metadata": {"description": "VM deployment location."}, "defaultValue": "westus"}, "dataDiskSizeInGB": {"type": "int", "defaultValue": 128, "metadata": {"description": "Size for Data Disks."}}, "numberOfDataDisks": {"type": "int", "minValue": 0, "maxValue": 16, "defaultValue": 1, "metadata": {"description": "The number of dataDisks to be returned in the output array."}}, "tags": {"type": "object", "defaultValue": "zytest"}}, "resources": [{"apiVersion": "2020-12-01", "type": "Microsoft.Compute/virtualMachines", "name": "[parameters(\'vmName\')]", "location": "[parameters(\'location\')]", "tags": "[parameters(\'tags\')]", "properties": {"hardwareProfile": {"vmSize": "[parameters(\'vmSize\')]"}, "osProfile": {"computerName": "[parameters(\'vmName\')]", "adminUsername": "[parameters(\'adminUsername\')]", "adminPassword": "[parameters(\'adminPassword\')]"}, "storageProfile": {"imageReference": {"publisher": "[parameters(\'imagePublisher\')]", "offer": "[parameters(\'imageOffer\')]", "sku": "[parameters(\'osSku\')]", "version": "latest"}, "osDisk": {"createOption": "FromImage"}, "copy": [{"name": "dataDisks", "count": "[parameters(\'numberOfDataDisks\')]", "input": {"diskSizeGB": "[parameters(\'dataDiskSizeInGB\')]", "lun": "[copyIndex(\'dataDisks\')]", "createOption": "Empty"}}]}, "networkProfile": {"networkInterfaces": [{"id": "[parameters(\'nicId\')]"}]}}}]}


cli_script
Here is the equivalent CLI script:\n\n```bash\n#!/bin/bash\n\n# Define the parameters\nvmName="zytest"\nadminUsername="zytest"\nadminPassword="zytest"\nvmSize="Standard_D2s_v3"\nimagePublisher="MicrosoftWindowsServer"\nimageOffer="WindowsServer"\nosSku="2012-R2-Datacenter"\nnicId="zytest"\nlocation="westus"\ndataDiskSizeInGB=128\nnumberOfDataDisks=1\ntags="zytest"\n\n# Create the virtual machine\naz vm create \\\n  --name $vmName \\\n  --location $location \\\n  --admin-username $adminUsername \\\n  --admin-password $adminPassword \\\n  --size $vmSize \\\n  --image $imagePublisher:$imageOffer:$osSku:latest \\\n  --nics $nicId \\\n  --tags $tags\n\n# Add data disks to the virtual machine\nfor ((i=0; i<$numberOfDataDisks; i++))\ndo\n  az vm disk attach \\\n    --vm-name $vmName \\\n    --name datadisk$i \\\n    --size $dataDiskSizeInGB \\\n    --new\ndone\n```\n\nThis script first defines the parameters, then creates the virtual machine with the specified parameters. After the virtual machine is created, it adds the specified number of data disks to the virtual machine.


verify_result
