arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Location for all resources."}}}, "variables": {"existingVirtualNetworkName": "vnet", "existingSubnetName": "subnet-1", "existingSGN": "NSG"}, "resources": [{"type": "Microsoft.Network/virtualNetworks", "name": "[variables(\'existingVirtualNetworkName\')]", "apiVersion": "2020-08-01", "location": "[parameters(\'location\')]", "comments": "Virtual network for overall solution", "tags": {"displayName": "Virtual Network"}, "properties": {"addressSpace": {"addressPrefixes": ["10.0.0.0/16"]}, "subnets": [{"name": "[variables(\'existingSubnetName\')]", "properties": {"addressPrefix": "10.0.1.0/24"}}]}}, {"type": "Microsoft.Network/networkSecurityGroups", "name": "[variables(\'existingSGN\')]", "apiVersion": "2016-03-30", "location": "[parameters(\'location\')]", "comments": "Virtual network for overall solution", "tags": {"displayName": "Virtual Network"}, "properties": {"securityRules": [{"name": "rule1", "properties": {"protocol": "*", "sourceAddressPrefix": "*", "destinationAddressPrefix": "*", "access": "Allow", "destinationPortRange": "80", "sourcePortRange": "*", "priority": 130, "direction": "Inbound"}}]}}], "outputs": {"existingVnetName": {"type": "string", "value": "[variables(\'existingVirtualNetworkName\')]"}, "existingVnetRG": {"type": "string", "value": "[resourceGroup().name]"}, "subnetName": {"type": "string", "value": "[variables(\'existingSubnetName\')]"}, "existingSecurityGroupName": {"type": "string", "value": "[variables(\'existingSGN\')]"}}}


cli_script
Here is the equivalent CLI script:\n\n```bash\n#!/bin/bash\n\n# Define parameters\nlocation="westus"\n\n# Define variables\nexistingVirtualNetworkName="vnet"\nexistingSubnetName="subnet-1"\nexistingSGN="NSG"\n\n# Create a virtual network\naz network vnet create --name $existingVirtualNetworkName --resource-group $resourceGroupName --location $location --address-prefix 10.0.0.0/16 --subnet-name $existingSubnetName --subnet-prefix 10.0.1.0/24\n\n# Create a network security group\naz network nsg create --name $existingSGN --resource-group $resourceGroupName --location $location\n\n# Add a security rule to the network security group\naz network nsg rule create --name rule1 --nsg-name $existingSGN --resource-group $resourceGroupName --protocol \'*\' --source-address-prefix \'*\' --destination-address-prefix \'*\' --access Allow --destination-port-range 80 --source-port-range \'*\' --priority 130 --direction Inbound\n\n# Output variables\necho "existingVnetName: $existingVirtualNetworkName"\necho "existingVnetRG: $resourceGroupName"\necho "subnetName: $existingSubnetName"\necho "existingSecurityGroupName: $existingSGN"\n```\n\nPlease replace `$resourceGroupName` with your actual resource group name.


verify_result
