arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"adminUsername": {"type": "string", "defaultValue": "zytest"}, "adminPassword": {"type": "secureString", "defaultValue": "zytest"}, "domainName": {"type": "string", "defaultValue": "zytest"}, "dnsPrefix": {"type": "string", "defaultValue": "zytest"}}, "variables": {"adUsername": "[parameters(\'adminUsername\')]"}, "resources": [{"name": "createADController", "type": "Microsoft.Resources/deployments", "apiVersion": "2020-06-01", "properties": {"mode": "Incremental", "templateLink": {"uri": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/modules/active-directory-new-domain/0.9/azuredeploy.json", "contentVersion": "1.0.0.0"}, "parameters": {"adminUsername": {"value": "[parameters(\'adminUsername\')]"}, "adminPassword": {"value": "[parameters(\'adminPassword\')]"}, "domainName": {"value": "[parameters(\'domainName\')]"}, "dnsPrefix": {"value": "[parameters(\'dnsPrefix\')]"}}}}], "outputs": {"domainName": {"type": "string", "value": "[reference(\'createADController\').outputs.domainName.value]"}, "virtualNetworkName": {"type": "string", "value": "[reference(\'createADController\').outputs.virtualNetworkName.value]"}, "subnetName": {"type": "string", "value": "[reference(\'createADController\').outputs.virtualNetworkSubnetName.value]"}, "adUsername": {"type": "string", "value": "[variables(\'adUsername\')]"}}}


cli_script
Here is the equivalent CLI script:\n\n```bash\n#!/bin/bash\n\n# Define parameters\nadminUsername="zytest"\nadminPassword="zytest"\ndomainName="zytest"\ndnsPrefix="zytest"\n\n# Define variables\nadUsername=$adminUsername\n\n# Create AD Controller\naz deployment group create --name createADController --resource-group myResourceGroup --template-uri "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/modules/active-directory-new-domain/0.9/azuredeploy.json" --parameters adminUsername=$adminUsername adminPassword=$adminPassword domainName=$domainName dnsPrefix=$dnsPrefix\n\n# Get outputs\ndomainName=$(az deployment group show --name createADController --resource-group myResourceGroup --query properties.outputs.domainName.value -o tsv)\nvirtualNetworkName=$(az deployment group show --name createADController --resource-group myResourceGroup --query properties.outputs.virtualNetworkName.value -o tsv)\nsubnetName=$(az deployment group show --name createADController --resource-group myResourceGroup --query properties.outputs.virtualNetworkSubnetName.value -o tsv)\nadUsername=$(az deployment group show --name createADController --resource-group myResourceGroup --query properties.outputs.adUsername.value -o tsv)\n```\n\nPlease replace `myResourceGroup` with your actual resource group name.


verify_result
