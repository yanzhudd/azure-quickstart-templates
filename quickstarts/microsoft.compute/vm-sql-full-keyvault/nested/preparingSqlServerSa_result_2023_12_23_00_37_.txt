arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"sqlVMName": {"type": "string", "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus"}, "adminUsername": {"type": "string", "defaultValue": "zytest"}, "adminPassword": {"type": "securestring", "defaultValue": "zytest"}, "sqlUsername": {"type": "string", "defaultValue": "zytest"}, "sqlPassword": {"type": "securestring", "defaultValue": "zytest"}, "disksCount": {"type": "int", "defaultValue": "zytest"}, "diskSizeInGB": {"type": "int", "defaultValue": "zytest"}, "sqlEnginePort": {"type": "int", "defaultValue": "zytest"}, "workloadType": {"type": "string", "defaultValue": "zytest"}, "connectionType": {"type": "string", "defaultValue": "zytest"}, "sqlVMPrepareModulesURL": {"type": "string", "defaultValue": "zytest"}, "sqlVMPrepareConfigurationFunction": {"type": "string", "defaultValue": "zytest"}}, "resources": [{"type": "Microsoft.Compute/virtualMachines/extensions", "name": "[concat(parameters(\'sqlVMName\'),\'/dscExtension\')]", "apiVersion": "2020-12-01", "location": "[parameters(\'location\')]", "properties": {"publisher": "Microsoft.Powershell", "type": "DSC", "typeHandlerVersion": "2.19", "autoUpgradeMinorVersion": false, "settings": {"ModulesUrl": "[parameters(\'sqlVMPrepareModulesURL\')]", "ConfigurationFunction": "[parameters(\'sqlVMPrepareConfigurationFunction\')]", "properties": {"SQLAdminAuthCreds": {"userName": "[parameters(\'adminUsername\')]", "Password": "privateSettingsRef:AdminPassword"}, "SQLAuthCreds": {"userName": "[parameters(\'sqlUsername\')]", "Password": "privateSettingsRef:SqlAuthPassword"}, "DisksCount": "[parameters(\'disksCount\')]", "DiskSizeInGB": "[parameters(\'diskSizeInGB\')]", "DatabaseEnginePort": "[parameters(\'sqlEnginePort\')]", "WorkloadType": "[parameters(\'workloadType\')]", "ConnectionType": "[parameters(\'connectionType\')]"}}, "protectedSettings": {"items": {"AdminPassword": "[parameters(\'adminPassword\')]", "SqlAuthPassword": "[parameters(\'sqlPassword\')]"}}}}]}


cli_script
Here is the equivalent CLI script:\n\n```bash\n#!/bin/bash\n\n# Define parameters\nsqlVMName="zytest"\nlocation="westus"\nadminUsername="zytest"\nadminPassword="zytest"\nsqlUsername="zytest"\nsqlPassword="zytest"\ndisksCount="zytest"\ndiskSizeInGB="zytest"\nsqlEnginePort="zytest"\nworkloadType="zytest"\nconnectionType="zytest"\nsqlVMPrepareModulesURL="zytest"\nsqlVMPrepareConfigurationFunction="zytest"\n\n# Create a virtual machine extension\naz vm extension set \\\n  --resource-group myResourceGroup \\\n  --vm-name $sqlVMName \\\n  --name dscExtension \\\n  --publisher Microsoft.Powershell \\\n  --version 2.19 \\\n  --settings "{\'ModulesUrl\': \'$sqlVMPrepareModulesURL\', \'ConfigurationFunction\': \'$sqlVMPrepareConfigurationFunction\', \'properties\': {\'SQLAdminAuthCreds\': {\'userName\': \'$adminUsername\', \'Password\': \'privateSettingsRef:AdminPassword\'}, \'SQLAuthCreds\': {\'userName\': \'$sqlUsername\', \'Password\': \'privateSettingsRef:SqlAuthPassword\'}, \'DisksCount\': \'$disksCount\', \'DiskSizeInGB\': \'$diskSizeInGB\', \'DatabaseEnginePort\': \'$sqlEnginePort\', \'WorkloadType\': \'$workloadType\', \'ConnectionType\': \'$connectionType\'}}" \\\n  --protected-settings "{\'items\': {\'AdminPassword\': \'$adminPassword\', \'SqlAuthPassword\': \'$sqlPassword\'}}"\n```\n\nPlease replace `myResourceGroup` with your actual resource group name. This script creates a virtual machine extension with the specified settings and protected settings.


verify_result
