arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"VMSSName": {"type": "string", "defaultValue": "zytest"}, "singlePlacementGroup": {"type": "bool", "defaultValue": true}, "instanceCount": {"type": "int", "defaultValue": "zytest"}, "subnetId": {"type": "string", "defaultValue": "zytest"}, "adminUsername": {"type": "string", "defaultValue": "zytest"}, "authenticationType": {"type": "string", "defaultValue": "zytest"}, "adminPasswordOrKey": {"type": "securestring", "defaultValue": "zytest"}, "vmssSku": {"type": "string", "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus"}}, "variables": {"linuxConfiguration": {"disablePasswordAuthentication": true, "ssh": {"publicKeys": [{"path": "[concat(\'/home/\', parameters(\'adminUsername\'), \'/.ssh/authorized_keys\')]", "keyData": "[parameters(\'adminPasswordOrKey\')]"}]}}}, "resources": [{"type": "Microsoft.Compute/virtualMachineScaleSets", "apiVersion": "2020-12-01", "name": "[parameters(\'vmSSName\')]", "location": "[parameters(\'location\')]", "sku": {"name": "[parameters(\'vmssSku\')]", "tier": "Standard", "capacity": "[parameters(\'instanceCount\')]"}, "properties": {"singlePlacementGroup": "[parameters(\'singlePlacementGroup\')]", "overprovision": true, "upgradePolicy": {"mode": "Manual"}, "virtualMachineProfile": {"storageProfile": {"osDisk": {"createOption": "FromImage", "caching": "ReadWrite"}, "imageReference": {"publisher": "Canonical", "offer": "UbuntuServer", "sku": "16.04-LTS", "version": "latest"}}, "osProfile": {"computerNamePrefix": "[parameters(\'vmSSName\')]", "adminUsername": "[parameters(\'adminUsername\')]", "adminPassword": "[parameters(\'adminPasswordOrKey\')]", "linuxConfiguration": "[if(equals(parameters(\'authenticationType\'), \'password\'), json(\'null\'), variables(\'linuxConfiguration\'))]"}, "networkProfile": {"networkInterfaceConfigurations": [{"name": "[concat(\'nic\', parameters(\'vmSSName\'))]", "properties": {"primary": true, "ipConfigurations": [{"name": "[concat(\'ipconfig\', parameters(\'vmSSName\'))]", "properties": {"subnet": {"Id": "[parameters(\'subnetId\')]"}}}]}}]}}}}]}


cli_script
Here is the equivalent CLI script:\n\n```bash\n#!/bin/bash\n\n# Define parameters\nVMSSName="zytest"\nsinglePlacementGroup=true\ninstanceCount="zytest"\nsubnetId="zytest"\nadminUsername="zytest"\nauthenticationType="zytest"\nadminPasswordOrKey="zytest"\nvmssSku="zytest"\nlocation="westus"\n\n# Define variables\nlinuxConfiguration=\'{"disablePasswordAuthentication": true, "ssh": {"publicKeys": [{"path": "/home/$adminUsername/.ssh/authorized_keys", "keyData": "$adminPasswordOrKey"}]}}\'\n\n# Create a virtual machine scale set\naz vmss create \\\n    --name $VMSSName \\\n    --resource-group myResourceGroup \\\n    --location $location \\\n    --image Canonical:UbuntuServer:16.04-LTS:latest \\\n    --admin-username $adminUsername \\\n    --generate-ssh-keys \\\n    --authentication-type $authenticationType \\\n    --admin-password-or-key $adminPasswordOrKey \\\n    --vm-sku $vmssSku \\\n    --instance-count $instanceCount \\\n    --single-placement-group $singlePlacementGroup \\\n    --upgrade-policy-mode Manual \\\n    --subnet $subnetId \\\n    --linux-configuration "$linuxConfiguration"\n```\n\nPlease replace `myResourceGroup` with your actual resource group name. This script creates a virtual machine scale set with the specified parameters and variables. The `az vmss create` command is used to create the virtual machine scale set. The parameters and variables are passed to the command as arguments. The `--generate-ssh-keys` option is used to automatically generate SSH public and private key files if they do not exist. The `--authentication-type` option is used to specify the type of authentication to use. The `--admin-password-or-key` option is used to provide either a password or an SSH public key. The `--vm-sku` option is used to specify the SKU of the virtual machines in the scale set. The `--instance-count` option is used to specify the number of instances in the scale set. The `--single-placement-group` option is used to specify whether the scale set should be in a single placement group. The `--upgrade-policy-mode` option is used to specify the upgrade policy mode. The `--subnet` option is used to specify the subnet ID. The `--linux-configuration` option is used to specify the Linux configuration.


verify_result
