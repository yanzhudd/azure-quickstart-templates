arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"existingManagedImageID": {"type": "string", "metadata": {"description": "Resource Id of the existing Managed Image"}, "defaultValue": "zytest"}, "existingGalleryName": {"type": "string", "metadata": {"description": "Name of the Azure Compute Gallery."}, "defaultValue": "zytest"}, "existingGalleryImageDefinitionName": {"type": "string", "metadata": {"description": "Name of the Image Definition."}, "defaultValue": "zytest"}, "galleryImageVersionName": {"type": "string", "metadata": {"description": "Name of the Image Version - should follow <MajorVersion>.<MinorVersion>.<Patch>."}, "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Location of the Azure Compute Gallery."}}}, "resources": [{"type": "Microsoft.Compute/galleries/images/versions", "apiVersion": "2020-09-30", "name": "[concat(parameters(\'existingGalleryName\'), \'/\', parameters(\'existingGalleryImageDefinitionName\'), \'/\', parameters(\'galleryImageVersionName\'))]", "location": "[parameters(\'location\')]", "properties": {"publishingProfile": {"replicaCount": 1, "targetRegions": [{"name": "[parameters(\'location\')]"}]}, "storageProfile": {"source": {"id": "[parameters(\'existingManagedImageID\')]"}, "osDiskImage": {"hostCaching": "ReadWrite"}}}}], "outputs": {"existingGalleryName": {"type": "string", "value": "[parameters(\'existingGalleryName\')]"}, "galleryImageVersion": {"type": "string", "value": "[parameters(\'galleryImageVersionName\')]"}, "existingGalleryImageDefinitionName": {"type": "string", "value": "[ parameters(\'existingGalleryImageDefinitionName\')]"}}}


cli_script
Based on the provided JSON data, I\'ll translate the ARM template into an equivalent Azure CLI script. First, I\'ll define the variables from the "TemplateParameters" and then translate the resource creation from the "ARMTemplate".\n\n```bash\n#!/bin/bash\n\n# Define template parameter variables\nexistingManagedImageID="zytest"\nexistingGalleryName="zytest"\nexistingGalleryImageDefinitionName="zytest"\ngalleryImageVersionName="zytest"\nlocation="westus"\n\n# Create the Azure Compute Gallery Image Version\naz sig image-version create \\\n  --resource-group <resource-group-name> \\\n  --gallery-name $existingGalleryName \\\n  --gallery-image-definition $existingGalleryImageDefinitionName \\\n  --gallery-image-version $galleryImageVersionName \\\n  --location $location \\\n  --managed-image $existingManagedImageID \\\n  --replica-count 1 \\\n  --target-regions $location \\\n  --os-snapshot <os-snapshot-id> \\\n  --data-snapshots <data-snapshot-ids> \\\n  --os-disk-caching ReadWrite \\\n  --output jsonc\n\n# Output variables\necho "Existing Gallery Name: $existingGalleryName"\necho "Gallery Image Version: $galleryImageVersionName"\necho "Existing Gallery Image Definition Name: $existingGalleryImageDefinitionName"\n```\n\nPlease note the following:\n- Replace `<resource-group-name>` with the actual resource group name where the gallery is located.\n- Replace `<os-snapshot-id>` with the OS snapshot ID if you\'re using a snapshot as the source for the OS disk image.\n- Replace `<data-snapshot-ids>` with the data disk snapshot IDs if you\'re using snapshots as the source for data disks.\n\nIf you\'re actually using a managed image as the source and not snapshots, you can omit the `--os-snapshot` and `--data-snapshots` parameters.\n\nAlso, ensure that you have the necessary permissions and the Azure CLI installed and logged in to your Azure account to execute the script.


verify_result
{"diff_info": ["  ", "  Thedeploymentwillupdatethefollowingscope:", "  ", "  Scope:/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg", "  ", "  -Microsoft.CognitiveServices/accounts/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.CognitiveServices/accounts/cli-translator\\"", "  identity.type:\\"None\\"", "  kind:\\"FormRecognizer\\"", "  location:\\"westus2\\"", "  name:\\"cli-translator\\"", "  sku.name:\\"F0\\"", "  type:\\"Microsoft.CognitiveServices/accounts\\"", "  ", "  -Microsoft.DocumentDb/databaseAccounts/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.DocumentDb/databaseAccounts/cli-translator\\"", "  identity.type:\\"None\\"", "  kind:\\"GlobalDocumentDB\\"", "  location:\\"westus\\"", "  name:\\"cli-translator\\"", "  tags.defaultExperience:\\"Core(SQL)\\"", "  type:\\"Microsoft.DocumentDb/databaseAccounts\\"", "  ", "  -Microsoft.Search/searchServices/customdatasearch", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Search/searchServices/customdatasearch\\"", "  location:\\"westus2\\"", "  name:\\"customdatasearch\\"", "  sku.name:\\"standard\\"", "  tags.ProjectType:\\"aoai-your-data-service\\"", "  type:\\"Microsoft.Search/searchServices\\"", "  ", "  -Microsoft.Storage/storageAccounts/clitranslatorapi", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Storage/storageAccounts/clitranslatorapi\\"", "  kind:\\"Storage\\"", "  location:\\"westus\\"", "  name:\\"clitranslatorapi\\"", "  sku.name:\\"Standard_LRS\\"", "  sku.tier:\\"Standard\\"", "  type:\\"Microsoft.Storage/storageAccounts\\"", "  ", "  -Microsoft.Storage/storageAccounts/customdataforgpt", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Storage/storageAccounts/customdataforgpt\\"", "  kind:\\"StorageV2\\"", "  location:\\"eastus\\"", "  name:\\"customdataforgpt\\"", "  sku.name:\\"Standard_RAGRS\\"", "  sku.tier:\\"Standard\\"", "  tags.ProjectType:\\"aoai-your-data-service\\"", "  type:\\"Microsoft.Storage/storageAccounts\\"", "  ", "  -Microsoft.Storage/storageAccounts/translatortempfiles", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Storage/storageAccounts/translatortempfiles\\"", "  kind:\\"StorageV2\\"", "  location:\\"eastasia\\"", "  name:\\"translatortempfiles\\"", "  sku.name:\\"Standard_LRS\\"", "  sku.tier:\\"Standard\\"", "  type:\\"Microsoft.Storage/storageAccounts\\"", "  ", "  -Microsoft.Web/serverFarms/ASP-clitranslatorrg-bdc9", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Web/serverFarms/ASP-clitranslatorrg-bdc9\\"", "  kind:\\"functionapp\\"", "  location:\\"westus\\"", "  name:\\"ASP-clitranslatorrg-bdc9\\"", "  sku.capacity:0", "  sku.family:\\"Y\\"", "  sku.name:\\"Y1\\"", "  sku.size:\\"Y1\\"", "  sku.tier:\\"Dynamic\\"", "  type:\\"Microsoft.Web/serverFarms\\"", "  ", "  -Microsoft.Web/sites/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Web/sites/cli-translator\\"", "  kind:\\"functionapp,linux\\"", "  location:\\"westus\\"", "  name:\\"cli-translator\\"", "  tags.hidden-link:/app-insights-conn-string:\\"InstrumentationKey=11b638ce-0c16-42cc-9516-58122a1922ef;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com/;LiveEndpoint=https://westus.livediagnostics.monitor.azure.com/\\"", "  tags.hidden-link:/app-insights-instrumentation-key:\\"11b638ce-0c16-42cc-9516-58122a1922ef\\"", "  tags.hidden-link:/app-insights-resource-id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/microsoft.insights/components/cli-translator\\"", "  type:\\"Microsoft.Web/sites\\"", "  ", "  -microsoft.alertsmanagement/smartDetectorAlertRules/FailureAnomalies-cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/microsoft.alertsmanagement/smartDetectorAlertRules/FailureAnomalies-cli-translator\\"", "  location:\\"global\\"", "  name:\\"FailureAnomalies-cli-translator\\"", "  type:\\"microsoft.alertsmanagement/smartDetectorAlertRules\\"", "  ", "  -microsoft.insights/components/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/microsoft.insights/components/cli-translator\\"", "  kind:\\"web\\"", "  location:\\"westus\\"", "  name:\\"cli-translator\\"", "  type:\\"microsoft.insights/components\\"", "  ", "  +Microsoft.Compute/galleries/zytest/images/zytest/versions/zytest[]", "  ", "  apiVersion:\\"\\"", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Compute/galleries/zytest/images/zytest/versions/zytest\\"", "  location:\\"westus\\"", "  name:\\"zytest\\"", "  properties.publishingProfile.replicaCount:1", "  properties.publishingProfile.targetRegions:[", "  0:", "  ", "  name:\\"westus\\"", "+ regionalReplicaCount:1", "+ storageAccountType:\\"Standard_LRS\\"", "  ", "  ]", "  properties.storageProfile.osDiskImage.hostCaching:\\"ReadWrite\\"", "  properties.storageProfile.source.id:\\"zytest\\"", "  type:\\"Microsoft.Compute/galleries/images/versions\\"", "  ", "  Resourcechanges:10todelete,1tocreate."], "diff_summary": {"added": 2, "deleted": 0, "differential_rate": "0.016"}}