arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"principalId": {"type": "string", "metadata": {"description": "Principal ID to set the access for"}, "defaultValue": "zytest"}, "storageAccountName": {"type": "string", "metadata": {"description": "The storage account to set access for"}, "defaultValue": "zytest"}}, "variables": {"contributor": "[subscriptionResourceId(\'Microsoft.Authorization/roleDefinitions\', \'b24988ac-6180-42a0-ab88-20f7382dd24c\')]", "scope": "[resourceId(\'Microsoft.Storage/storageAccounts\',parameters(\'storageAccountName\'))]", "RBACResourceName": "[guid(variables(\'scope\'), variables(\'contributor\'), parameters(\'principalId\'))]"}, "resources": [{"apiVersion": "2019-04-01-preview", "name": "[concat(parameters(\'storageAccountName\'), \'/Microsoft.Authorization/\', variables(\'RBACResourceName\'))]", "type": "Microsoft.Storage/storageAccounts/providers/roleAssignments", "properties": {"roleDefinitionId": "[variables(\'contributor\')]", "principalId": "[parameters(\'principalId\')]", "scope": "[variables(\'scope\')]", "principalType": "ServicePrincipal"}}]}


cli_script
Based on the given ARM template and parameters, here\'s the equivalent Azure CLI script in bash:\n\n```bash\n#!/bin/bash\n\n# Parameters\nprincipalId="zytest" # Principal ID to set the access for\nstorageAccountName="zytest" # The storage account to set access for\n\n# Variables\ncontributorRoleId=$(az role definition list --name \'Contributor\' --query "[].id" -o tsv)\nscope=$(az storage account show --name $storageAccountName --query "id" -o tsv)\nRBACResourceName=$(uuidgen)\n\n# Create a role assignment for the storage account\naz role assignment create \\\n    --role $contributorRoleId \\\n    --assignee $principalId \\\n    --scope $scope \\\n    --assignee-object-id $principalId \\\n    --assignee-principal-type ServicePrincipal \\\n    --name $RBACResourceName\n```\n\nThis script sets up the variables according to the parameters and variables defined in the ARM template and then executes the `az role assignment create` command to create a role assignment for the storage account, granting the \'Contributor\' role to the specified principal ID.\n\nMake sure to replace the placeholder values in the `principalId` and `storageAccountName` variables with actual values before running the script. Also, ensure you have the necessary permissions to create role assignments and that you are logged in to the Azure CLI with `az login`.


verify_result
