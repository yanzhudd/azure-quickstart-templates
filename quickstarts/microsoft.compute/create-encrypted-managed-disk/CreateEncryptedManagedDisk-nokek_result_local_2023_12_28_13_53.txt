arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"vhdUri": {"type": "string", "metadata": {"description": "Storage VHD Uri"}, "defaultValue": "zytest"}, "managedDiskName": {"type": "string", "metadata": {"description": "Name of the managed disk to be copied"}, "defaultValue": "zytest"}, "keyVaultResourceID": {"type": "string", "metadata": {"description": "KeyVault resource id. Ex: /subscriptions/subscriptionid/resourceGroups/contosorg/providers/Microsoft.KeyVault/vaults/contosovault"}, "defaultValue": "zytest"}, "keyVaultSecretUrl": {"type": "string", "metadata": {"description": "KeyVault secret Url. Ex: https://contosovault.vault.azure.net/secrets/contososecret/e088818e865e48488cf363af16dea596"}, "defaultValue": "zytest"}, "kekUrl": {"type": "string", "defaultValue": "", "metadata": {"description": "Ignore this. Not consumed"}}, "kekVaultResourceID": {"type": "string", "defaultValue": "", "metadata": {"description": "Ignore this. Not consumed"}}, "location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Location for all resources."}}}, "variables": {"location": "[parameters(\'location\')]", "storageAccountType": "Standard_LRS", "diskSzie": "128"}, "resources": [{"apiVersion": "2016-04-30-preview", "type": "Microsoft.Compute/disks", "name": "[parameters(\'managedDiskName\')]", "location": "[variables(\'location\')]", "properties": {"creationData": {"createOption": "Import", "sourceUri": "[parameters(\'vhdUri\')]"}, "accountType": "[variables(\'storageAccountType\')]", "diskSizeGB": "[variables(\'diskSzie\')]", "encryptionSettings": {"enabled": true, "diskEncryptionKey": {"sourceVault": {"id": "[parameters(\'keyVaultResourceID\')]"}, "secretUrl": "[parameters(\'keyVaultSecretUrl\')]"}}}}]}


cli_script
Based on the provided JSON data, the ARM template defines parameters for creating an Azure managed disk with encryption settings. Below is the equivalent Azure CLI script that accomplishes the same task:\n\n```bash\n#!/bin/bash\n\n# Parameters\nvhdUri="zytest" # Storage VHD Uri\nmanagedDiskName="zytest" # Name of the managed disk to be copied\nkeyVaultResourceID="zytest" # KeyVault resource id\nkeyVaultSecretUrl="zytest" # KeyVault secret Url\n# kekUrl and kekVaultResourceID are ignored as per the metadata description\nlocation="westus" # Location for all resources\n\n# Variables\nstorageAccountType="Standard_LRS" # Storage Account Type\ndiskSize="128" # Disk Size in GB\n\n# Create managed disk with encryption\naz disk create \\\n    --resource-group <resource-group> \\ # Replace <resource-group> with your actual resource group name\n    --name "$managedDiskName" \\\n    --location "$location" \\\n    --source "$vhdUri" \\\n    --size-gb "$diskSize" \\\n    --sku "$storageAccountType" \\\n    --encryption-type "EncryptionAtRestWithPlatformKey" \\ # Assuming platform-managed keys for encryption\n    --encryption-settings-collection "[{\\"keyVaultId\\":\\"$keyVaultResourceID\\",\\"keyUrl\\":\\"$keyVaultSecretUrl\\",\\"keyVaultUri\\":null}]" \\\n    --query [id] -o tsv\n\n# Note: You may need to adjust the --encryption-type and --encryption-settings-collection\n# parameters based on your specific encryption requirements and whether you\'re using\n# platform-managed keys or customer-managed keys.\n```\n\nPlease ensure that you replace `<resource-group>` with the actual name of the resource group where you want to create the managed disk. Also, adjust the encryption settings as necessary for your specific scenario. If you are using customer-managed keys, you will need to modify the `--encryption-type` and provide the correct `--encryption-settings-collection` values.


verify_result
{"diff_info": ["  ", "  Thedeploymentwillupdatethefollowingscope:", "  ", "  Scope:/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg", "  ", "  -Microsoft.CognitiveServices/accounts/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.CognitiveServices/accounts/cli-translator\\"", "  identity.type:\\"None\\"", "  kind:\\"FormRecognizer\\"", "  location:\\"westus2\\"", "  name:\\"cli-translator\\"", "  sku.name:\\"F0\\"", "  type:\\"Microsoft.CognitiveServices/accounts\\"", "  ", "  -Microsoft.DocumentDb/databaseAccounts/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.DocumentDb/databaseAccounts/cli-translator\\"", "  identity.type:\\"None\\"", "  kind:\\"GlobalDocumentDB\\"", "  location:\\"westus\\"", "  name:\\"cli-translator\\"", "  tags.defaultExperience:\\"Core(SQL)\\"", "  type:\\"Microsoft.DocumentDb/databaseAccounts\\"", "  ", "  -Microsoft.Search/searchServices/customdatasearch", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Search/searchServices/customdatasearch\\"", "  location:\\"westus2\\"", "  name:\\"customdatasearch\\"", "  sku.name:\\"standard\\"", "  tags.ProjectType:\\"aoai-your-data-service\\"", "  type:\\"Microsoft.Search/searchServices\\"", "  ", "  -Microsoft.Storage/storageAccounts/clitranslatorapi", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Storage/storageAccounts/clitranslatorapi\\"", "  kind:\\"Storage\\"", "  location:\\"westus\\"", "  name:\\"clitranslatorapi\\"", "  sku.name:\\"Standard_LRS\\"", "  sku.tier:\\"Standard\\"", "  type:\\"Microsoft.Storage/storageAccounts\\"", "  ", "  -Microsoft.Storage/storageAccounts/customdataforgpt", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Storage/storageAccounts/customdataforgpt\\"", "  kind:\\"StorageV2\\"", "  location:\\"eastus\\"", "  name:\\"customdataforgpt\\"", "  sku.name:\\"Standard_RAGRS\\"", "  sku.tier:\\"Standard\\"", "  tags.ProjectType:\\"aoai-your-data-service\\"", "  type:\\"Microsoft.Storage/storageAccounts\\"", "  ", "  -Microsoft.Storage/storageAccounts/translatortempfiles", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Storage/storageAccounts/translatortempfiles\\"", "  kind:\\"StorageV2\\"", "  location:\\"eastasia\\"", "  name:\\"translatortempfiles\\"", "  sku.name:\\"Standard_LRS\\"", "  sku.tier:\\"Standard\\"", "  type:\\"Microsoft.Storage/storageAccounts\\"", "  ", "  -Microsoft.Web/serverFarms/ASP-clitranslatorrg-bdc9", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Web/serverFarms/ASP-clitranslatorrg-bdc9\\"", "  kind:\\"functionapp\\"", "  location:\\"westus\\"", "  name:\\"ASP-clitranslatorrg-bdc9\\"", "  sku.capacity:0", "  sku.family:\\"Y\\"", "  sku.name:\\"Y1\\"", "  sku.size:\\"Y1\\"", "  sku.tier:\\"Dynamic\\"", "  type:\\"Microsoft.Web/serverFarms\\"", "  ", "  -Microsoft.Web/sites/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Web/sites/cli-translator\\"", "  kind:\\"functionapp,linux\\"", "  location:\\"westus\\"", "  name:\\"cli-translator\\"", "  tags.hidden-link:/app-insights-conn-string:\\"InstrumentationKey=11b638ce-0c16-42cc-9516-58122a1922ef;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com/;LiveEndpoint=https://westus.livediagnostics.monitor.azure.com/\\"", "  tags.hidden-link:/app-insights-instrumentation-key:\\"11b638ce-0c16-42cc-9516-58122a1922ef\\"", "  tags.hidden-link:/app-insights-resource-id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/microsoft.insights/components/cli-translator\\"", "  type:\\"Microsoft.Web/sites\\"", "  ", "  -microsoft.alertsmanagement/smartDetectorAlertRules/FailureAnomalies-cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/microsoft.alertsmanagement/smartDetectorAlertRules/FailureAnomalies-cli-translator\\"", "  location:\\"global\\"", "  name:\\"FailureAnomalies-cli-translator\\"", "  type:\\"microsoft.alertsmanagement/smartDetectorAlertRules\\"", "  ", "  -microsoft.insights/components/cli-translator", "  ", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/microsoft.insights/components/cli-translator\\"", "  kind:\\"web\\"", "  location:\\"westus\\"", "  name:\\"cli-translator\\"", "  type:\\"microsoft.insights/components\\"", "  ", "- +Microsoft.Compute/disks/zytest[-preview]", "?                                 --------\\n", "+ +Microsoft.Compute/disks/zytest[]", "  ", "- apiVersion:\\"-preview\\"", "?             --------\\n", "+ apiVersion:\\"\\"", "  id:\\"/subscriptions/6b085460-5f21-477e-ba44-1035046e9101/resourceGroups/cli-translator-rg/providers/Microsoft.Compute/disks/zytest\\"", "  location:\\"westus\\"", "  name:\\"zytest\\"", "- properties.accountType:\\"Standard_LRS\\"", "  properties.creationData.createOption:\\"Import\\"", "  properties.creationData.sourceUri:\\"zytest\\"", "- properties.diskSizeGB:\\"128\\"", "?                       -   -\\n", "+ properties.diskSizeGB:128", "- properties.encryptionSettings.diskEncryptionKey.secretUrl:\\"zytest\\"", "- properties.encryptionSettings.diskEncryptionKey.sourceVault.id:\\"zytest\\"", "?                      --------               ^ ------------\\n", "+ properties.encryption.diskEncryptionSet.id:\\"zytest\\"", "?                                     ^\\n", "- properties.encryptionSettings.enabled:true", "+ properties.encryption.type:\\"EncryptionAtRestWithPlatformKey\\"", "+ properties.sku.name:\\"Standard_LRS\\"", "  type:\\"Microsoft.Compute/disks\\"", "  ", "  Resourcechanges:10todelete,1tocreate."], "diff_summary": {"added": 6, "deleted": 7, "differential_rate": "0.108"}}