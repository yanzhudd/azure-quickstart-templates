arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"principalId": {"type": "string", "metadata": {"description": "Principal ID to set the access for"}, "defaultValue": "zytest"}, "storageAccountName": {"type": "string", "metadata": {"description": "The storage account to set access for"}, "defaultValue": "zytest"}}, "variables": {"contributor": "[subscriptionResourceId(\'Microsoft.Authorization/roleDefinitions\', \'b24988ac-6180-42a0-ab88-20f7382dd24c\')]", "scope": "[resourceId(\'Microsoft.Storage/storageAccounts\',parameters(\'storageAccountName\'))]", "RBACResourceName": "[guid(variables(\'scope\'), variables(\'contributor\'), parameters(\'principalId\'))]"}, "resources": [{"apiVersion": "2019-04-01-preview", "name": "[concat(parameters(\'storageAccountName\'), \'/Microsoft.Authorization/\', variables(\'RBACResourceName\'))]", "type": "Microsoft.Storage/storageAccounts/providers/roleAssignments", "properties": {"roleDefinitionId": "[variables(\'contributor\')]", "principalId": "[parameters(\'principalId\')]", "scope": "[variables(\'scope\')]", "principalType": "ServicePrincipal"}}]}


cli_script
Based on the given ARM template and parameters, the following bash script represents the equivalent Azure CLI commands to create a role assignment for a storage account:\n\n```bash\n#!/bin/bash\n\n# Parameters\nprincipalId="zytest" # Principal ID to set the access for\nstorageAccountName="zytest" # The storage account to set access for\n\n# Variables\ncontributor="b24988ac-6180-42a0-ab88-20f7382dd24c" # Role Definition ID for Contributor\nscope=$(az storage account show --name $storageAccountName --query id --output tsv) # Scope for the role assignment\nRBACResourceName=$(uuidgen) # Unique identifier for the role assignment\n\n# Create a role assignment for the storage account\naz role assignment create \\\n    --role $contributor \\\n    --assignee-object-id $principalId \\\n    --assignee-principal-type ServicePrincipal \\\n    --scope $scope \\\n    --name $RBACResourceName\n```\n\nPlease make sure to replace the placeholder values in the `principalId` and `storageAccountName` variables with the actual values you wish to use. Additionally, the `az storage account show` command is used to retrieve the resource ID of the storage account, which is necessary for the scope of the role assignment. The `uuidgen` command generates a unique identifier for the role assignment name. The `az role assignment create` command creates the role assignment with the specified parameters.


verify_result
