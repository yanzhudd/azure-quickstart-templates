arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"principalId": {"type": "string", "metadata": {"description": "Principal ID to set the access for"}, "defaultValue": "zytest"}, "storageAccountName": {"type": "string", "metadata": {"description": "The storage account to set access for"}, "defaultValue": "zytest"}}, "variables": {"contributor": "[subscriptionResourceId(\'Microsoft.Authorization/roleDefinitions\', \'b24988ac-6180-42a0-ab88-20f7382dd24c\')]", "scope": "[resourceId(\'Microsoft.Storage/storageAccounts\',parameters(\'storageAccountName\'))]", "RBACResourceName": "[guid(variables(\'scope\'), variables(\'contributor\'), parameters(\'principalId\'))]"}, "resources": [{"apiVersion": "2019-04-01-preview", "name": "[concat(parameters(\'storageAccountName\'), \'/Microsoft.Authorization/\', variables(\'RBACResourceName\'))]", "type": "Microsoft.Storage/storageAccounts/providers/roleAssignments", "properties": {"roleDefinitionId": "[variables(\'contributor\')]", "principalId": "[parameters(\'principalId\')]", "scope": "[variables(\'scope\')]", "principalType": "ServicePrincipal"}}]}


cli_script
'content': '#!/bin/bash\n\n# Define variables\nprincipalId="zytest"\nstorageAccountName="zytest"\ncontributor="b24988ac-6180-42a0-ab88-20f7382dd24c"\nscope=$(az storage account show --name $storageAccountName --query id --output tsv)\nRBACResourceName=$(az ad sp create-for-rbac --name $principalId --role $contributor --scopes $scope --query appId --output tsv)\n\n# Create role assignment\naz role assignment create --role $contributor --assignee $principalId --scope $scope', 'validation_results': [], 'command_count': 1, 'gpt_model': 'GPT_4_32k'


verify_result
