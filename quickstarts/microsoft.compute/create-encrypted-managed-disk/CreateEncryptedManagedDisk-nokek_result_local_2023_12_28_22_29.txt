arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"vhdUri": {"type": "string", "metadata": {"description": "Storage VHD Uri"}, "defaultValue": "zytest"}, "managedDiskName": {"type": "string", "metadata": {"description": "Name of the managed disk to be copied"}, "defaultValue": "zytest"}, "keyVaultResourceID": {"type": "string", "metadata": {"description": "KeyVault resource id. Ex: /subscriptions/subscriptionid/resourceGroups/contosorg/providers/Microsoft.KeyVault/vaults/contosovault"}, "defaultValue": "zytest"}, "keyVaultSecretUrl": {"type": "string", "metadata": {"description": "KeyVault secret Url. Ex: https://contosovault.vault.azure.net/secrets/contososecret/e088818e865e48488cf363af16dea596"}, "defaultValue": "zytest"}, "kekUrl": {"type": "string", "defaultValue": "", "metadata": {"description": "Ignore this. Not consumed"}}, "kekVaultResourceID": {"type": "string", "defaultValue": "", "metadata": {"description": "Ignore this. Not consumed"}}, "location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Location for all resources."}}}, "variables": {"location": "[parameters(\'location\')]", "storageAccountType": "Standard_LRS", "diskSzie": "128"}, "resources": [{"apiVersion": "2016-04-30-preview", "type": "Microsoft.Compute/disks", "name": "[parameters(\'managedDiskName\')]", "location": "[variables(\'location\')]", "properties": {"creationData": {"createOption": "Import", "sourceUri": "[parameters(\'vhdUri\')]"}, "accountType": "[variables(\'storageAccountType\')]", "diskSizeGB": "[variables(\'diskSzie\')]", "encryptionSettings": {"enabled": true, "diskEncryptionKey": {"sourceVault": {"id": "[parameters(\'keyVaultResourceID\')]"}, "secretUrl": "[parameters(\'keyVaultSecretUrl\')]"}}}}]}


cli_script
```bash\n#!/bin/bash\n\n# Define variables from parameters\nvhdUri="zytest"\nmanagedDiskName="zytest"\nkeyVaultResourceID="zytest"\nkeyVaultSecretUrl="zytest"\n# kekUrl and kekVaultResourceID are ignored as per metadata description\nlocation="westus"\n\n# Define variables from variables\nstorageAccountType="Standard_LRS"\ndiskSzie=128\n\n# Translate ARM resource to Azure CLI command\n# Create a managed disk from the VHD Uri\naz disk create \\\n  --name "$managedDiskName" \\\n  --resource-group "<ResourceGroupName>" \\ # Replace with your actual resource group name\n  --location "$location" \\\n  --source "$vhdUri" \\\n  --sku "$storageAccountType" \\\n  --size-gb "$diskSzie" \\\n  --encryption-settings-collection "[{\\"enabled\\": true, \\"diskEncryptionKey\\": {\\"sourceVault\\": {\\"id\\": \\"$keyVaultResourceID\\"}, \\"secretUrl\\": \\"$keyVaultSecretUrl\\"}}]"\n\n# Note: Replace <ResourceGroupName> with your actual resource group name where the managed disk will be created.\n```\n\nPlease note that you need to replace `<ResourceGroupName>` with the actual name of the resource group where you want to create the managed disk. Also, ensure that you have the necessary permissions and that the CLI is logged in to the correct Azure account and subscription before running the script.


verify_result
