arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"VMSSName": {"type": "string", "defaultValue": "zytest"}, "singlePlacementGroup": {"type": "bool", "defaultValue": true}, "instanceCount": {"type": "int", "defaultValue": "zytest"}, "subnetId": {"type": "string", "defaultValue": "zytest"}, "adminUsername": {"type": "string", "defaultValue": "zytest"}, "authenticationType": {"type": "string", "defaultValue": "zytest"}, "adminPasswordOrKey": {"type": "securestring", "defaultValue": "zytest"}, "vmssSku": {"type": "string", "defaultValue": "zytest"}, "location": {"type": "string", "defaultValue": "westus"}}, "variables": {"linuxConfiguration": {"disablePasswordAuthentication": true, "ssh": {"publicKeys": [{"path": "[concat(\'/home/\', parameters(\'adminUsername\'), \'/.ssh/authorized_keys\')]", "keyData": "[parameters(\'adminPasswordOrKey\')]"}]}}}, "resources": [{"type": "Microsoft.Compute/virtualMachineScaleSets", "apiVersion": "2020-12-01", "name": "[parameters(\'vmSSName\')]", "location": "[parameters(\'location\')]", "sku": {"name": "[parameters(\'vmssSku\')]", "tier": "Standard", "capacity": "[parameters(\'instanceCount\')]"}, "properties": {"singlePlacementGroup": "[parameters(\'singlePlacementGroup\')]", "overprovision": true, "upgradePolicy": {"mode": "Manual"}, "virtualMachineProfile": {"storageProfile": {"osDisk": {"createOption": "FromImage", "caching": "ReadWrite"}, "imageReference": {"publisher": "Canonical", "offer": "UbuntuServer", "sku": "16.04-LTS", "version": "latest"}}, "osProfile": {"computerNamePrefix": "[parameters(\'vmSSName\')]", "adminUsername": "[parameters(\'adminUsername\')]", "adminPassword": "[parameters(\'adminPasswordOrKey\')]", "linuxConfiguration": "[if(equals(parameters(\'authenticationType\'), \'password\'), json(\'null\'), variables(\'linuxConfiguration\'))]"}, "networkProfile": {"networkInterfaceConfigurations": [{"name": "[concat(\'nic\', parameters(\'vmSSName\'))]", "properties": {"primary": true, "ipConfigurations": [{"name": "[concat(\'ipconfig\', parameters(\'vmSSName\'))]", "properties": {"subnet": {"Id": "[parameters(\'subnetId\')]"}}}]}}]}}}}]}


cli_script
Based on the provided ARM template and parameters, below is the equivalent Azure CLI script that creates a Virtual Machine Scale Set (VMSS) with the specified properties:\n\n```bash\n#!/bin/bash\n\n# Assigning parameter values to variables\nVMSSName="zytest"\nsinglePlacementGroup=true\ninstanceCount=1\nsubnetId="zytest"\nadminUsername="zytest"\nauthenticationType="zytest"\nadminPasswordOrKey="zytest"\nvmssSku="zytest"\nlocation="westus"\n\n# Create the VMSS with the specified parameters\naz vmss create \\\n    --name $VMSSName \\\n    --resource-group <YourResourceGroup> \\ # Replace with your actual resource group name\n    --location $location \\\n    --vm-sku $vmssSku \\\n    --instance-count $instanceCount \\\n    --single-placement-group $singlePlacementGroup \\\n    --upgrade-policy-mode Manual \\\n    --admin-username $adminUsername \\\n    --subnet $subnetId \\\n    --authentication-type $authenticationType \\\n    --admin-password $adminPasswordOrKey \\\n    --image Canonical:UbuntuServer:16.04-LTS:latest \\\n    --overprovision true\n\n# If authentication type is "ssh", set up the SSH public key authentication\nif [ "$authenticationType" == "ssh" ]; then\n    # Replace <YourPublicKey> with the actual public key data\n    az vmss extension set \\\n        --resource-group <YourResourceGroup> \\ # Replace with your actual resource group name\n        --vmss-name $VMSSName \\\n        --name VMAccessForLinux \\\n        --publisher Microsoft.OSTCExtensions \\\n        --version 1.4 \\\n        --protected-settings "{\\"ssh_key\\":\\"<YourPublicKey>\\"}" # Replace <YourPublicKey> with the actual public key data\nfi\n\n# Note: This script assumes that you have already created a subnet and have its ID.\n# Replace <YourResourceGroup> with your actual resource group name.\n# Replace <YourPublicKey> with the actual SSH public key data if using SSH authentication.\n# The script may need additional modifications based on the actual requirements and Azure environment setup.\n```\n\nPlease replace `<YourResourceGroup>` with the name of your actual Azure resource group and `<YourPublicKey>` with your SSH public key if you are using SSH key authentication. The script assumes that you have already created the required subnet and have its ID available. Adjust the script as necessary to fit your Azure environment.


verify_result
