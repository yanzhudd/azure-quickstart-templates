arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"location": {"metadata": {"description": "The Location For the resources"}, "type": "string", "defaultValue": "westus"}, "extensionName": {"type": "string", "metadata": {"description": "name of the extension"}, "defaultValue": "zytest"}, "vmName": {"metadata": {"description": "The name of the vm"}, "type": "string", "defaultValue": "zytest"}, "fileUris": {"type": "array", "defaultValue": "zytest"}, "commandToExecute": {"type": "string", "defaultValue": "zytest"}, "isWindowsOS": {"type": "bool", "defaultValue": "zytest"}}, "variables": {"extensionNameWindows": "[concat(parameters(\'extensionName\'), \'-windows\')]", "extensionNameLinux": "[concat(parameters(\'extensionName\'), \'-linux\')]"}, "resources": [{"condition": "[parameters(\'isWindowsOS\')]", "type": "Microsoft.Compute/virtualMachines/extensions", "apiVersion": "2020-12-01", "name": "[concat(parameters(\'vmName\'), \'/\', variables(\'extensionNameWindows\'))]", "location": "[parameters(\'location\')]", "properties": {"publisher": "Microsoft.Compute", "type": "CustomScriptExtension", "typeHandlerVersion": "1.8", "autoUpgradeMinorVersion": true, "settings": {"fileUris": "[parameters(\'fileUris\')]", "commandToExecute": "[parameters(\'commandToExecute\')]"}}}, {"condition": "[not(parameters(\'isWindowsOS\'))]", "type": "Microsoft.Compute/virtualMachines/extensions", "apiVersion": "2017-03-30", "name": "[concat(parameters(\'vmName\'), \'/\', variables(\'extensionNameLinux\'))]", "location": "[parameters(\'location\')]", "properties": {"publisher": "Microsoft.Azure.Extensions", "type": "CustomScript", "typeHandlerVersion": "2.0", "autoUpgradeMinorVersion": true, "settings": {"fileUris": "[parameters(\'fileUris\')]"}, "protectedSettings": {"commandToExecute": "[parameters(\'commandToExecute\')]"}}}], "outputs": {"instanceView": {"value": "[reference(if(parameters(\'isWindowsOS\'), resourceId(\'Microsoft.Compute/virtualMachines/extensions\', parameters(\'vmName\'), variables(\'extensionNameWindows\')), resourceId(\'Microsoft.Compute/virtualMachines/extensions\', parameters(\'vmName\'), variables(\'extensionNameLinux\')))).instanceView]", "type": "object"}}}


cli_script
Based on the provided ARM template and parameters, the following is the equivalent Azure CLI script in bash:\n\n```bash\n#!/bin/bash\n\n# Template Parameters\nlocation="westus" # The Location For the resources\nextensionName="zytest" # name of the extension\nvmName="zytest" # The name of the vm\nfileUris=("zytest") # Array of file URIs\ncommandToExecute="zytest" # Command to be executed\nisWindowsOS=false # Boolean indicating if the OS is Windows\n\n# Variables\nextensionNameWindows="${extensionName}-windows"\nextensionNameLinux="${extensionName}-linux"\n\n# Conditional Resource Deployment\nif $isWindowsOS; then\n  # Deploying Windows VM Extension\n  az vm extension set \\\n    --resource-group <ResourceGroupName> \\\n    --vm-name $vmName \\\n    --name $extensionNameWindows \\\n    --publisher Microsoft.Compute \\\n    --version 1.8 \\\n    --settings "{\\"fileUris\\": ${fileUris[@]}, \\"commandToExecute\\": \\"$commandToExecute\\"}" \\\n    --location $location\nelse\n  # Deploying Linux VM Extension\n  az vm extension set \\\n    --resource-group <ResourceGroupName> \\\n    --vm-name $vmName \\\n    --name $extensionNameLinux \\\n    --publisher Microsoft.Azure.Extensions \\\n    --version 2.0 \\\n    --settings "{\\"fileUris\\": ${fileUris[@]}}" \\\n    --protected-settings "{\\"commandToExecute\\": \\"$commandToExecute\\"}" \\\n    --location $location\nfi\n```\n\nPlease replace `<ResourceGroupName>` with the actual name of your resource group where the virtual machine resides.\n\nNote: The ARM template contains a condition for resource deployment based on the `isWindowsOS` parameter. The CLI script reflects this condition using an if-else statement. The file URIs are assumed to be an array of strings, but since the default value provided is a single string "zytest", it\'s wrapped in an array. If you have multiple file URIs, you should list them as separate elements in the `fileUris` array.\n\nAlso, this script assumes that the `az vm extension set` command is appropriate for setting the VM extension, and you may need to modify the script to include authentication or other required parameters specific to your Azure setup.


verify_result
