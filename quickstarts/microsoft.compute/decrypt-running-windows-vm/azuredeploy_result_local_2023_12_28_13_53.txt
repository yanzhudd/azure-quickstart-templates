arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"vmName": {"type": "string", "metadata": {"description": "Name of the virtual machine"}, "defaultValue": "zytest"}, "volumeType": {"type": "string", "defaultValue": "All", "allowedValues": ["All", "OS", "Data"], "metadata": {"description": "Type of the volume OS or Data or All to perform decryption operation"}}, "sequenceVersion": {"type": "string", "defaultValue": "1.0", "metadata": {"description": "Pass in an unique value like a GUID everytime the operation needs to be force run"}}, "location": {"type": "string", "defaultValue": "westus", "metadata": {"description": "Location for all resources."}}}, "variables": {"extensionName": "AzureDiskEncryption", "extensionVersion": "1.1", "encryptionOperation": "DisableEncryption", "updateEncryptionSettingsUrl": "[concat(\'https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/quickstarts/microsoft.compute/decrypt-running-windows-vm/updateEncryptionSettings-\',parameters(\'volumeType\'),\'.json\')]"}, "resources": [{"type": "Microsoft.Compute/virtualMachines/extensions", "name": "[concat(parameters(\'vmName\'),\'/\', variables(\'extensionName\'))]", "apiVersion": "2016-04-30-preview", "location": "[parameters(\'location\')]", "properties": {"publisher": "Microsoft.Azure.Security", "type": "AzureDiskEncryption", "typeHandlerVersion": "[variables(\'extensionVersion\')]", "autoUpgradeMinorVersion": true, "forceUpdateTag": "[parameters(\'sequenceVersion\')]", "settings": {"VolumeType": "[parameters(\'volumeType\')]", "EncryptionOperation": "[variables(\'encryptionOperation\')]"}}}, {"name": "updatevm", "type": "Microsoft.Resources/deployments", "apiVersion": "2015-01-01", "dependsOn": ["[resourceId(\'Microsoft.Compute/virtualMachines/extensions\',  parameters(\'vmName\'), variables(\'extensionName\'))]"], "properties": {"mode": "Incremental", "templateLink": {"uri": "[variables(\'updateEncryptionSettingsUrl\')]", "contentVersion": "1.0.0.0"}, "parameters": {"vmName": {"value": "[parameters(\'vmName\')]"}}}}]}


cli_script
Below is the translated bash script for deploying the resources defined in the ARM template using Azure CLI commands. Please note that the actual execution of these commands may require you to be logged in to your Azure account and have the necessary permissions to create these resources.\n\n```bash\n#!/bin/bash\n\n# Template Parameters\nvmName="zytest"\nvolumeType="All"\nsequenceVersion="1.0"\nlocation="westus"\n\n# Variables\nextensionName="AzureDiskEncryption"\nextensionVersion="1.1"\nencryptionOperation="DisableEncryption"\nupdateEncryptionSettingsUrl="https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/quickstarts/microsoft.compute/decrypt-running-windows-vm/updateEncryptionSettings-${volumeType}.json"\n\n# Deploy the Azure Disk Encryption extension to the virtual machine\naz vm extension set \\\n  --resource-group <ResourceGroup> \\\n  --vm-name $vmName \\\n  --name $extensionName \\\n  --publisher Microsoft.Azure.Security \\\n  --version $extensionVersion \\\n  --settings "{\\"VolumeType\\":\\"$volumeType\\",\\"EncryptionOperation\\":\\"$encryptionOperation\\"}" \\\n  --location $location \\\n  --force-update-tag $sequenceVersion \\\n  --no-auto-upgrade-minor-version false\n\n# Deploy the updateEncryptionSettings template to the virtual machine\naz deployment group create \\\n  --name updatevm \\\n  --resource-group <ResourceGroup> \\\n  --template-uri $updateEncryptionSettingsUrl \\\n  --parameters vmName=$vmName \\\n  --mode Incremental\n```\n\nPlease replace `<ResourceGroup>` with the name of the resource group where you want to deploy these resources. Also, ensure that you have the correct permissions to deploy resources in the specified resource group.\n\nThe script sets up variables based on the template parameters, then it uses `az vm extension set` to add the Azure Disk Encryption extension to the virtual machine. After that, it uses `az deployment group create` to deploy the updateEncryptionSettings template.


verify_result
