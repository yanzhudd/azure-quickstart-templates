arm_template
{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"vmName": {"type": "string", "metadata": {"description": "Name of the virtual machine"}, "defaultValue": "zytest"}, "adminUsername": {"type": "string", "metadata": {"description": "Admin user name for the virtual machine"}, "defaultValue": "zytest"}, "adminPassword": {"type": "securestring", "metadata": {"description": "Admin user password for virtual machine"}, "defaultValue": "zytest"}, "vmSize": {"type": "string", "defaultValue": "Standard_D2s_v3", "metadata": {"description": "Size of VM"}}, "imagePublisher": {"type": "string", "defaultValue": "MicrosoftWindowsServer"}, "imageOffer": {"type": "string", "defaultValue": "WindowsServer"}, "osSku": {"type": "string", "defaultValue": "2012-R2-Datacenter", "metadata": {"description": "OS sku for VM"}}, "nicId": {"type": "string", "metadata": {"description": "Network interface id."}, "defaultValue": "zytest"}, "location": {"type": "string", "metadata": {"description": "VM deployment location."}, "defaultValue": "westus"}, "dataDiskSizeInGB": {"type": "int", "defaultValue": 128, "metadata": {"description": "Size for Data Disks."}}, "numberOfDataDisks": {"type": "int", "minValue": 0, "maxValue": 16, "defaultValue": 1, "metadata": {"description": "The number of dataDisks to be returned in the output array."}}, "tags": {"type": "object", "defaultValue": "zytest"}}, "resources": [{"apiVersion": "2020-12-01", "type": "Microsoft.Compute/virtualMachines", "name": "[parameters(\'vmName\')]", "location": "[parameters(\'location\')]", "tags": "[parameters(\'tags\')]", "properties": {"hardwareProfile": {"vmSize": "[parameters(\'vmSize\')]"}, "osProfile": {"computerName": "[parameters(\'vmName\')]", "adminUsername": "[parameters(\'adminUsername\')]", "adminPassword": "[parameters(\'adminPassword\')]"}, "storageProfile": {"imageReference": {"publisher": "[parameters(\'imagePublisher\')]", "offer": "[parameters(\'imageOffer\')]", "sku": "[parameters(\'osSku\')]", "version": "latest"}, "osDisk": {"createOption": "FromImage"}, "copy": [{"name": "dataDisks", "count": "[parameters(\'numberOfDataDisks\')]", "input": {"diskSizeGB": "[parameters(\'dataDiskSizeInGB\')]", "lun": "[copyIndex(\'dataDisks\')]", "createOption": "Empty"}}]}, "networkProfile": {"networkInterfaces": [{"id": "[parameters(\'nicId\')]"}]}}}]}


cli_script
```bash\n#!/bin/bash\n\n# Define variables from template parameters\nvmName="zytest"\nadminUsername="zytest"\nadminPassword="zytest" # Note: In production, use secure methods to handle passwords\nvmSize="Standard_D2s_v3"\nimagePublisher="MicrosoftWindowsServer"\nimageOffer="WindowsServer"\nosSku="2012-R2-Datacenter"\nnicId="zytest"\nlocation="westus"\ndataDiskSizeInGB=128\nnumberOfDataDisks=1\ntags="zytest" # This should be a JSON object, but the default value provided is a string\n\n# Create the virtual machine with the specified parameters\naz vm create \\\n  --name "$vmName" \\\n  --location "$location" \\\n  --tags "$tags" \\\n  --size "$vmSize" \\\n  --image "$imagePublisher:$imageOffer:$osSku:latest" \\\n  --admin-username "$adminUsername" \\\n  --admin-password "$adminPassword" \\\n  --nics "$nicId" \\\n  --generate-ssh-keys\n\n# Add data disks to the virtual machine\nfor (( i=0; i<numberOfDataDisks; i++ )); do\n  az vm disk attach \\\n    --vm-name "$vmName" \\\n    --name "${vmName}-datadisk-${i}" \\\n    --size-gb "$dataDiskSizeInGB" \\\n    --sku "Standard_LRS" \\\n    --new \\\n    --lun "$i"\ndone\n```\n\nPlease note that the `tags` parameter in the ARM template is an object, but the default value provided in the JSON is a string. In a real-world scenario, you would need to provide a JSON object for tags. The bash script above assumes tags is a simple string, which would not be correct if you have multiple tags. You would need to adjust the script to handle the JSON object for tags accordingly.\n\nAdditionally, the `adminPassword` should be handled securely. In this script, it\'s directly assigned as a string variable, which is not secure for production environments. You should consider using Azure Key Vault or other secure methods to manage passwords and secrets.


verify_result
